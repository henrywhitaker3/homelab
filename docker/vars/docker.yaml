---
docker_tz: Europe/London

wireguard_peers: s22,thinkpad_personal,thinkpad_work

netdata_bind_ip: 10.0.0.160

swag_css_theme: nord

cifs_mounts:
  - src: //10.0.0.9/plex
    path: /plex

loki_version: 2.6.1

loki_port: 3100

crog_actions:
  - name: Heartbeat
    command: ping -W 1 -c 1 8.8.8.8
    code: 0
    cron: "* * * * *"
    when:
      start: "{{ healthchecks.heartbeat }}/start"
      success: "{{ healthchecks.heartbeat }}"
      failure: "{{ healthchecks.heartbeat }}/fail"
  - name: Backup
    command: /home/{{ ansible_user }}/backup.sh
    code: 0
    cron: "30 4 * * *"
    when:
      start: "{{ healthchecks.backup }}/start"
      success: "{{ healthchecks.backup }}"
      failure: "{{ healthchecks.backup }}/fail"
  - name: Docker pull
    command: docker compose -f /home/henry/docker-compose.yaml pull
    code: 0
    cron: "0 3 * * 7"
  - name: Docker up
    command: docker compose -f /home/henry/docker-compose.yaml up -d
    code: 0
    cron: "15 3 * * 7"
  - name: Docker prune
    command: docker image prune -f
    code: 0
    cron: "0 4 * * 1"
  - name: Restart radarr
    command: docker compose -f /home/henry/docker-compose.yaml restart radarr
    code: 0
    cron: "0 12 * * *"
  - name: Restart sonarr
    command: docker compose -f /home/henry/docker-compose.yaml restart sonarr
    code: 0
    cron: "0 12 * * *"
  - name: Check mullvad tunnel
    command: docker compose -f /home/henry/docker-compose.yaml exec wireguard ping -W 1 -c 3 8.8.8.8
    code: 0
    cron: "* * * * *"
    when:
      start: "{{ healthchecks.mullvad }}/start"
      success: "{{ healthchecks.mullvad }}"
      failure: "{{ healthchecks.mullvad }}/fail"
  # - name: Restart qbittorrent
  #   command: docker compose -f /home/henry/docker-compose.yaml restart qbittorrent
  #   code: 0
  #   cron: "0 12 * * *"

crog_verbose: true
