---
- name: restart nginx
  tags:
    - docker
    - nginx
    - compose
  ansible.builtin.shell: "cd /home/{{ ansible_user }}/ && docker compose restart swag"
  changed_when: true

- name: dc up
  tags:
    - docker
    - compose
  ansible.builtin.shell: "cd /home/{{ ansible_user }}/ && docker compose up -d --remove-orphans"
  changed_when: true

- name: restart torrent
  tags:
    - docker
    - compose
    - torrent
  ansible.builtin.shell: "cd /home/{{ ansible_user }} && docker compose restart qbittorrent"
  changed_when: true

- name: restart authelia
  tags:
    - authelia
  ansible.builtin.shell: "cd /home/{{ ansible_user }} && docker compose restart authelia"
  changed_when: true

- name: restart wg tunnel
  tags:
    - docker
    - compose
    - torrent
  ansible.builtin.shell: "cd /home/{{ ansible_user }} && docker compose restart wireguard"
  changed_when: true

- name: restart prometheus
  tags:
    - docker
    - compose
    - monitoring
  ansible.builtin.shell: "cd /home/{{ ansible_user }} && docker compose restart prometheus"
  changed_when: true

- name: restart docker
  become: true
  tags: docker
  ansible.builtin.service:
    name: docker
    state: restarted
