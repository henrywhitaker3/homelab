version: "3"

tasks:
  play:
    desc: Run a playbook
    requires:
      vars:
        - PLAY
    env:
      PLAYBOOK: '{{ .PLAYBOOK | default "main.yaml" }}'
      PLAY: '{{ .PLAY }}'
    preconditions:
      - sh: "[[ ! -z $PLAY ]]"
        msg: |
          Must set $PLAY variable
    cmds:
      - ansible-playbook ansible/playbooks/$PLAY/$PLAYBOOK {{ .CLI_ARGS }}
