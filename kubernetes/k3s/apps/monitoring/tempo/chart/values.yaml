tempo:
  replicas: 1

  service:
    type: LoadBalancer
    annotations:
     metallb.universe.tf/loadBalancerIPs: 10.0.0.37

  tempo:
    repository: grafana/tempo
    tag: 2.4.1

    retention: 24h
    storage:
      trace:
        backend: s3
        s3:
          bucket: tempo
          endpoint: s3.plexmox.com
          region: unraid
          insecure: false
          access_key: ${MINIO_ACCESS_KEY}
          secret_key: ${MINIO_SECRET_KEY}
          forcepathstyle: true

    extraArgs:
      config.expand-env: true
    extraEnv:
      - name: MINIO_ACCESS_KEY
        valueFrom:
          secretKeyRef:
            name: tempo-minio
            key: aws-access-key-id
      - name: MINIO_SECRET_KEY
        valueFrom:
          secretKeyRef:
            name: tempo-minio
            key: aws-secret-access-key
