prompage:
  configuration:
    prometheus: http://kube-prometheus-stack-prometheus.monitoring.svc:9090
    services:
      - name: Postgres
        query:
          query: sum(pg_up)
          expression: float(result) == 7
      - name: Galera
        query:
          query: sum(mysql_up{job="mariadb-metrics"})
          expression: float(result) == 7
      - name: MinIO
        query:
          query: sum(minio_cluster_nodes_offline_total)
          expression: float(result) == 0


  replicaCount: 2

  ingress:
    enabled: true
    annotations:
      kubernetes.io/tls-acme: "true"
      cert-manager.io/cluster-issuer: letsencrypt-prod
      nginx.ingress.kubernetes.io/auth-url: https://auth.plexmox.com/api/verify
      nginx.ingress.kubernetes.io/auth-signin: https://auth.plexmox.com
    hosts:
      - host: status.plexmox.com
        paths:
          - path: /
            pathType: ImplementationSpecific
    tls:
    - secretName: status-plexmox-com-tls
      hosts:
        - status.plexmox.com

