apiVersion: k8s.mariadb.com/v1alpha1
kind: MaxScale
metadata:
  name: maxscale-repl
spec:
  replicas: 3

  mariaDbRef:
    name: mariadb
    namespace: mariadb

  kubernetesService:
    type: LoadBalancer
    loadBalancerIP: 10.0.0.29

  admin:
    port: 8989
    guiEnabled: true

  config:
    volumeClaimTemplate:
      storageClassName: longhorn-no-backups
      resources:
        requests:
          storage: 100Mi
      accessModes:
        - ReadWriteOnce

  # metrics:
  #   enabled: true
  #   serviceMonitor:
  #     enabled: true
